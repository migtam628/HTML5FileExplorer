<!DOCTYPE html>
<!--
Copyright 2019 Google Inc.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

Author: Pete LePage (petele@google.com)
-->

<html>
<head>
  <meta charset="utf-8">
  <title>HTML5 File Explorer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

  <!-- Pre-connect to font server -->
  <link rel="preconnect" href="https://fonts.gstatic.com/">

  <!-- SEO description and info -->
  <meta name="description" content="HTML5 File Explorer">
  <!-- <link rel="canonical" href="TODO"> -->

  <!-- Manifest and icons -->
  <!-- <link rel="manifest" href="/TODO.json"> -->
  <!-- <link rel="icon" href="/TODO/favicon.ico"> -->
  <meta name="theme-color" content="#37474F">

  <!-- Add to homescreen for Chrome on Android. -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="application-name" content="File5">

  <!-- Tile icon for Windows 8 (144x144 + tile color) -->
  <meta name="msapplication-TileImage" content="/icons/144.png">
  <meta name="msapplication-TileColor" content="#37474F">
  <meta name="msapplication-tap-highlight" content="no">

  <!-- Default twitter cards -->
  <meta name="twitter:card" content="summary">
  <!-- <meta name="twitter:url" content="TODO"> -->
  <meta name="twitter:title" content="File5">
  <meta name="twitter:description" content="HTML5 File Explorer">
  <!-- <meta name="twitter:image" content="https://sounddrown.app/icons/192.png"> -->
  <meta name="twitter:creator" content="@petele">

  <!-- Other sharing -->
  <meta property="og:title" content="File5">
  <meta property="og:type" content="website">
  <!-- <meta property="og:image" content="https://sounddrown.app/icons/192.png"> -->
  <!-- <meta property="og:url" content="https://sounddrown.app/"> -->
  <meta property="og:description" content="HTML5 File Explorer">

  <script>
    /* eslint-disable */
    // window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
    // ga('create', 'UA-9988000-28', 'auto');
    // ga('set', 'transport', 'beacon');
    /* esline-enable */
  </script>

  <!-- Styles -->
  <link rel="stylesheet" href="/styles/file5.css">

</head>
<body>

  <header>
    <button type="button" id="butBack" disabled>
      <svg xmlns="http://www.w3.org/2000/svg" width="48px" height="48px" viewBox="0 0 48 48" fill="#fff">
        <path d="M0 0h48v48H0z" fill="none"/>
        <path d="M40 22H15.66l11.17-11.17L24 8 8 24l16 16 2.83-2.83L15.66 26H40v-4z"/>
      </svg>
    </button>
    <button type="button" id="butForward" disabled>
      <svg xmlns="http://www.w3.org/2000/svg" width="48px" height="48px" viewBox="0 0 48 48" fill="#fff">
        <path d="M0 0h48v48H0z" fill="none"/>
        <path d="M24 8l-2.83 2.83L32.34 22H8v4h24.34L21.17 37.17 24 40l16-16z"/>
      </svg>
    </button>
    <div class="spacer"></div>
    <button type="button" id="butGrid" class="selected">
      <svg xmlns="http://www.w3.org/2000/svg" width="48px" height="48px" viewBox="0 0 48 48" fill="#fff">
        <path d="M8 22h10V10H8v12zm0 14h10V24H8v12zm12 0h10V24H20v12zm12 0h10V24H32v12zM20 22h10V10H20v12zm12-12v12h10V10H32z"/>
        <path d="M0 0h48v48H0z" fill="none"/>
      </svg>
    </button>
    <button type="button" id="butList">
      <svg xmlns="http://www.w3.org/2000/svg" width="48px" height="48px" viewBox="0 0 48 48" fill="#fff">
        <path d="M8 30h34v-4H8v4zm0 8h34v-4H8v4zm0-16h34v-4H8v4zm0-12v4h34v-4H8z"/>
        <path d="M0 0h48v48H0z" fill="none"/>
      </svg>
    </button>
    <h1>
      File5
    </h1>
    <button type="button" id="butRefresh">
      <svg xmlns="http://www.w3.org/2000/svg" width="48px" height="48px" viewBox="0 0 48 48" fill="#fff">
        <path d="M35.3 12.7C32.41 9.8 28.42 8 24 8 15.16 8 8.02 15.16 8.02 24S15.16 40 24 40c7.45 0 13.69-5.1 15.46-12H35.3c-1.65 4.66-6.07 8-11.3 8-6.63 0-12-5.37-12-12s5.37-12 12-12c3.31 0 6.28 1.38 8.45 3.55L26 22h14V8l-4.7 4.7z"/>
        <path d="M0 0h48v48H0z" fill="none"/>
    </svg>
    </button>
    <button type="button" id="butDelete" disabled>
      <svg xmlns="http://www.w3.org/2000/svg" width="48px" height="48px" viewBox="0 0 48 48" fill="#fff">
        <path d="M12 38c0 2.21 1.79 4 4 4h16c2.21 0 4-1.79 4-4V14H12v24zM38 8h-7l-2-2H19l-2 2h-7v4h28V8z"/>
        <path d="M0 0h48v48H0z" fill="none"/>
      </svg>
    </button>
  </header>

  <div class="file-container grid">
    <div class="file-container-inner">

    </div>
  </div>

  <footer id="footer">
    &nbsp;
  </footer>

  <div id="dialogContainer">
    <div id="dialogOverlay">
    </div>

    <div class="dialog" id="dialogStart">
      <div class="dialog-title">
        HTML5 File Explorer
      </div>
      <div class="dialog-body">
        <p>
          <!-- TODO: Update description -->
          A Command-line terminal/shell running on top of the native file system
          APIs.
        </p>
        <p>
          The native file system API is <span class="red bold notSupported">not</span>
          supported on this browser. <span class="notSupported">If you're running
          Chrome, you can try enabling the <code>#native-file-system-api</code>
          flag in <code>chrome://flags</code>.</span>
        </p>
      </div>
      <div class="dialog-buttons">
        <button id="butStart" disabled type="button">Open Folder</button>
      </div>
    </div>

    <div class="dialog hidden" id="dialogPreview">
      <div class="dialog-title">
        Preview
      </div>
      <div class="dialog-body">
        <div id="preview-container"></div>
      </div>
      <div class="dialog-buttons">
        <button type="button" class="close">Close</button>
      </div>
    </div>

    <div class="dialog hidden" id="dialogAbout">
      <div class="dialog-title">
        About
      </div>
      <div class="dialog-body">
        <p>
          <b>File5</b> TODO.
        </p>
        <p>
          <b>Author:</b> <a href="https://github.com/petele">Pete LePage</a><br>
          <b>Version:</b> [[VERSION]]<br>
          <b>Build date:</b> [[BUILD_DATE]]<br>
          <a href="https://github.com/petele/HTML5FileExplorer">
            Source code on GitHub
          </a>
        </p>
      </div>
      <div class="dialog-buttons">
        <button type="button" class="close">Close</button>
      </div>
    </div>

  </div>

  <script src="/scripts/file5.js" async></script>
  <script src="/scripts/dialog.js"></script>
  <script>

    // const dialogStart = new Dialog('dialogStart');
    // const dialogAbout = new Dialog('dialogAbout');
    // const dialogPreview = new Dialog('dialogPreview');
    // dialogStart.show(true);

    const butStart = document.getElementById('butStart');
    butStart.addEventListener('click', (e) => {
      const opts = {
        type: 'openDirectory',
        multiple: false,
      };
      window.chooseFileSystemEntries(opts)
          .then((handle) => {
            // dialogStart.show(false);
            window.file5 = new HTML5FileExplorer(handle);
          })
          .catch((err) => {
            console.log('err', err);
          });
    });

    if (window.chooseFileSystemEntries) {
      butStart.removeAttribute('disabled');
      const elems = document.querySelectorAll('.notSupported');
      elems.forEach((elem) => {
        elem.classList.add('hidden');
      });
    }

  </script>

</body>
</html>
